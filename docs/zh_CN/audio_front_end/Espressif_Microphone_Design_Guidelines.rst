乐鑫麦克风设计指南
==================

:link_to_translation:`en:[English]`

基于乐鑫的 S3 系列语音开发板，对于整机 Mic 设计要求如下：

⻨克⻛电器性能推荐
------------------

#. ⻨克类型：全向型 MEMS ⻨克⻛
#. 灵敏度

    - 1Pa 声压下模拟⻨灵敏度不低于 -38dBV，数字⻨灵敏度要求不低于 -26dB。
    - 公差控制在 ±2dB，对于⻨克阵列推荐采用 ±1dB 公差。

#. 信噪比(SNR)

    - 信噪比- 信噪比不低于 62dB，推荐 >64dB
    - 频率响应在 50~16KHz 范围内的波动在 ±3dB 之内。
    - 麦克风（NENS MIC）的 PSRR 应大于 55 dB

结构设计建议
----------------

#. ⻨克孔孔径或宽度推荐大于 1mm，拾音管道尽量短，腔体尽可能小，保证⻨克和结构组件配合的谐振频率在 9KHz 以上。
#. 拾音孔深度和直径比小于 2:1，壳体厚度推荐1mm，如果壳体过厚，需增大开孔面积。
#. ⻨克孔上需通过防尘网进行保护。
#. ⻨克⻛与设备外壳之间必须加硅胶套或泡棉等进行密封和防震，需进行过盈配合设计，以保证⻨克的密封性。
#. ⻨克孔不能被遮挡，底部拾音的⻨克孔需结构上增加凸起，避免⻨克孔被桌面等遮挡。
#. ⻨克需远离喇叭等会产生噪音或振动的物体摆放，且与喇叭音腔之间通过橡胶垫等隔离缓冲。

⻨克阵列设计推荐
-----------------------

#. ⻨克类型：全向型硅⻨，同一个阵列内的⻨克推荐同一厂家同一型号，不建议混用。
#. ⻨克阵列中各⻨克灵敏度差异在 3dB 之内。
#. 相位差：多⻨克阵列中⻨克之间的相位差控制在 10° 以内。
#. ⻨克阵列中各⻨克的结构设计，推荐采用相同的设计，以保证结构设计的一致性。
#. 2 MIC方案：⻨克间距要求 4~6.5cm，连接两个⻨克⻛的轴线应平行于水平线，且两个⻨克的中心尽量靠近产品水平方向的中心。
#. 3 MIC方案：3 个⻨克⻛等间距并且成正圆分布（夹⻆互成 120度），间距要求 4~6.5cm。

⻨克⻛结构密封性
----------------

用橡皮泥等材料封堵⻨克拾音孔，密封前后⻨克⻛采集信号的幅度衰减25dB合格，推荐30dB。测试方法：

#. ⻨克⻛正上方 0.5 米处，播放白噪声，⻨克⻛处音量 90dB。
#. 使用⻨克⻛阵列录制 10s 以上，存储为录音文件A。
#. 用橡皮泥等材料封堵⻨克拾音孔，使用⻨克⻛阵列录制 10s 以上，存储为录音文件B。
#. 对比两个文件的频谱，需保证100~8KHz频段内整体衰减 25dB 以上。

回声参考信号设计
----------------

#. 回声参考信号推荐尽量靠近喇叭侧，推荐从 DA 后级 PA 前级回采。
#. 扬声器音量最大时，输入到⻨克的回声参考信号不能有饱和失真，最大音量下喇叭功放输出 THD 满足100Hz 小于 10%，200Hz 小于 6%，350Hz 以上频率，小于 3% 。
#. 扬声器音量最大时，⻨克处拾音的声压不超过 102dB@1KHz。
#. 回声参考信号电压不超过 ADC 的最大允许输入电压，电压过高需增加衰减电路。
#. 从D类功放输出引参考回声信号需增加低通滤波器，滤波器的截止频率推荐 >22KHz。
#. 音量最大播放时，回采信号峰值 -3 到 -5dB。

⻨克⻛阵列一致性验证
----------------------------

要求各个⻨克⻛采样信号幅度相差小于 3dB，测试方法：

#. ⻨克⻛正上方 0.5 米处，播放白噪声，⻨克⻛处音量 90dB 。
#. 使用⻨克⻛阵列录制 10s 以上，查看各 mic 录音幅度和音频采样率是否一致。
